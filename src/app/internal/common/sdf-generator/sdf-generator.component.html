<div class="m-t-6xl">
  <div class="m-t-3xl">
    <div class="p-l-l p-r-l m-b">
      <mat-card>
        <form novalidate [formGroup]="form" (ngSubmit)="onSubmit()">
          <div class="flex-container">
            <div class="">
              <mat-form-field class="regular-field">
                <input
                    formControlName="campaignName"
                    name="campaignName"
                    matInput
                    placeholder="Campaign Name">
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="regular-field">
                <mat-select placeholder="Devices" formControlName="devices" multiple>
                  <mat-option *ngFor="let device of devices" [value]="device.id">
                    {{ device.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="regular-field">
                <mat-select placeholder="Geo" formControlName="geos" multiple>
                  <mat-option *ngFor="let geo of geos" [value]="geo.id">
                    {{ geo.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="regular-field">
                <mat-select placeholder="Genders" formControlName="genders" multiple>
                  <mat-option *ngFor="let gender of genders" [value]="gender">
                    {{ gender }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field class="regular-field">
                <mat-select placeholder="Age" formControlName="ageCategories" multiple>
                  <mat-option *ngFor="let ac of ageCategories" [value]="ac">
                    {{ ac }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div>

              <mat-form-field class="regular-field">
                <input matInput placeholder="Interest" [matAutocomplete]="auto" formControlName='interests'>
              </mat-form-field>
              <!--<div>Selected: {{form.get('interests').value | json}}</div>-->

              <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayInterestFn">
                <mat-option *ngFor="let interest of (filteredInterests$ | async)" [value]="interest">
                  <span>{{ interest.name }}</span>
                  <small> | ID: {{interest.id}}</small>
                </mat-option>
              </mat-autocomplete>

              <!--<mat-form-field class="regular-field">-->
                <!--<mat-select placeholder="Interests" formControlName="interests" multiple>-->
                  <!--<mat-option *ngFor="let interest of interests" [value]="interest.id">-->
                    <!--{{ interest.name }}-->
                  <!--</mat-option>-->
                <!--</mat-select>-->
              <!--</mat-form-field>-->
            </div>

            <div></div>

            <div class="m-t-l p-b-l text-right">
                <span class="m-r-l">
                    <button mat-raised-button class="mat-primary" [disabled]="!form.valid" type="submit">
                      Generate
                    </button>
                </span>
            </div>

          </div>
          <div class="tags-container mt-3">
            <div *ngFor="let interest of selectedInterests">
              <app-tag [tag]="interest"></app-tag>
            </div>
          </div>
        </form>
      </mat-card>
      <div *ngIf="showSpinner">
        <mat-spinner class="spinner m-t-6xl m-b-6xl"></mat-spinner>
      </div>

      <div class="m-t-l" *ngIf="!showSpinner && lineItems.length > 0">
        <app-line-item-list [lineItems]="lineItems"></app-line-item-list>
      </div>

    </div>
  </div>
</div>
